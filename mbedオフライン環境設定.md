# stm32マイコン(mbed互換機)のオフライン環境のセットアップ方法

2020 5/21 石関記録

## VSCodeの拡張機能であるPlarformIOをインストールする

新規プロジェクトを作成して

- platform --> "mbed"
- ボード --> "Nucleo F303K8"
    
を選択する (作成場所は任意でOK)

   
## プロジェクト作成後、platformio.iniを編集する(重要)

一番下の設定に次の1文を追加する。

 upload_protocol = mbed 

これを追加しないとコンパイルが通らない(多分)

- オンラインコンパイラ同様にプログラムを作成する

- 動作に必要なヘッダーファイルやcppファイルなどはプロジェクトのsrcフォルダに一緒に入れておく

## 準備ができたらコンパイルする

- VSCodeのチェックマークからプログラムをコンパイルする(オンラインコンパイラよりも時間がかかる)

    - 最初の1回ではいくつかの警告が出る可能性があるが、何回かコンパイルすると出なくなる

コンパイルや書き込みのGUIの機能はArduinoIDEと似ているかも

## ターゲット(マイコン)に書き込む

書き込みたいマイコンとPCをケーブルで接続して、->マークをクリック (オンラインコンパイラのように.binファイルがエクスポートされる訳ではない)

